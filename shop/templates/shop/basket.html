{% extends "base.html" %}

{% load static %}
{% load i18n %}

{% url 'events' as events_url %}
{% url 'news' as news_url %}
{% url 'how_you_can_help' as how_you_can_help_url %}
{% url 'online_shop' as online_shop_url %}

{% block content %}

<section class='mt-0 hero' id='hero-donations'>
    <div class="container-fluid p-0">
        <div class='row position-relative hero-image-div'>
            <img class='img-fluid hero-image' src="{% static 'images/shopping_cart_with_heart.jpg' %}" alt="{% trans 'A shopping cart with heart inside it.' %}">
            <h1 class='fst-italic fw-bold hero-heading'>{% trans 'Your Basket' %}</h1>
        </div>
    </div>
</section>

<hr class='m-5'>

<section id='basket'>
    <div class="container-fluid">
        <div class="row mx-4 my-4">
            <div class="col col-md-12 animate__animated animate__fadeInUp animate__slow">
                <table class="table table-hover table-striped table-responsive">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    {%  if basket %}
                    <tbody>
                        {% for product_id, item in basket.items %}
                        <tr>
                            <td>{{ item.product.name }}</td>
                            <td>{{ item.quantity }}</td>
                            <td>
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black" class="bi bi-currency-euro" viewBox="0 0 16 16">
                                    <path d="M4 9.42h1.063C5.4 12.323 7.317 14 10.34 14c.622 0 1.167-.068 1.659-.185v-1.3c-.484.119-1.045.17-1.659.17-2.1 0-3.455-1.198-3.775-3.264h4.017v-.928H6.497v-.936q-.002-.165.008-.329h4.078v-.927H6.618c.388-1.898 1.719-2.985 3.723-2.985.614 0 1.175.05 1.659.177V2.194A6.6 6.6 0 0 0 10.341 2c-2.928 0-4.82 1.569-5.244 4.3H4v.928h1.01v1.265H4v.928z"/>
                                </svg> {{ item.price }}
                            </td>
                            <td>
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black" class="bi bi-currency-euro" viewBox="0 0 16 16">
                                    <path d="M4 9.42h1.063C5.4 12.323 7.317 14 10.34 14c.622 0 1.167-.068 1.659-.185v-1.3c-.484.119-1.045.17-1.659.17-2.1 0-3.455-1.198-3.775-3.264h4.017v-.928H6.497v-.936q-.002-.165.008-.329h4.078v-.927H6.618c.388-1.898 1.719-2.985 3.723-2.985.614 0 1.175.05 1.659.177V2.194A6.6 6.6 0 0 0 10.341 2c-2.928 0-4.82 1.569-5.244 4.3H4v.928h1.01v1.265H4v.928z"/>
                                </svg> {% widthratio item.quantity 1 item.price %}
                            </td>
                            <td class="text-center">
                                <button type="submit" class="btn btn-danger btn-sm btn-to-remove-item fs-6"
                                data-basket_id='{{item.id}}' aria-label="Remove"><strong>-</strong></button>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="3" class="text-end"><strong>Total Amount</strong></td>
                            <td>
                                <strong>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="black" class="bi bi-currency-euro" viewBox="0 0 16 16">
                                        <path d="M4 9.42h1.063C5.4 12.323 7.317 14 10.34 14c.622 0 1.167-.068 1.659-.185v-1.3c-.484.119-1.045.17-1.659.17-2.1 0-3.455-1.198-3.775-3.264h4.017v-.928H6.497v-.936q-.002-.165.008-.329h4.078v-.927H6.618c.388-1.898 1.719-2.985 3.723-2.985.614 0 1.175.05 1.659.177V2.194A6.6 6.6 0 0 0 10.341 2c-2.928 0-4.82 1.569-5.244 4.3H4v.928h1.01v1.265H4v.928z"/>
                                    </svg> 
                                </strong>
                            </td>
                        </tr>
                    </tbody>
                    {% else %}
                        <p>Your basket is empty.</p>
                    {% endif %}
                </table>
                <div><a href="{% url 'online_shop' %}" id="continue-shop" class="btn btn-secondary mb-3" aria-label="Continue Shoping">Continue Shopping</a></div>
</section>

<hr class='m-5'>

<section id='user-details'>
    
</section>

<hr class='m-5'>

<section id='links-basket'>
    <div class="container-fluid">
        <div class="row d-flex flex-column flex-lg-row">
            <div class="col my-3 d-flex flex-column">
                <div class='d-flex justify-content-center'>
                    <img class='w-75' src="{% static 'images/conference.jpg' %}" alt="{% trans 'In the blured background people are in a connference and a speaker delivers a speech.' %}">
                </div>
                <div class='d-flex justify-content-center mt-4'>
                    <a class='fs-2 fw-bold' href="{% url 'news' %}">{% trans 'Find out about our Events' %}</a>
                </div>
            </div>
            <div class='col my-3 pe-lg-5 d-flex flex-column'>
                <div class='d-flex justify-content-center'>
                    <img class='w-75' src="{% static 'images/istockphoto-1335915930-1024x1024.jpg' %}" alt="{% trans 'Two hands holding a red heart over a laptop.' %}">
                </div>
                <div class='d-flex justify-content-center mt-4'>
                    <a class='fs-2 fw-bold' href="{% url 'news' %}">{% trans 'Read our news' %}</a>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}