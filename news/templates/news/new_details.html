{% extends "base.html" %}

{% load static %}
{% load i18n %}

{% get_current_language as LANGUAGE_CODE %}

{% url 'news' as news_url %}

<!--Add meta tags dynamically for Facebook posts-->
{% block meta %}
    <meta property="og:type" content="article" />
    <meta property="og:url" content="{{ request.build_absolute_uri }}" />

    {% if LANGUAGE_CODE == 'el' %}
        <meta property="og:title" content="{{ new.title_greek }}">
        <meta property="og:description" content="{{ new.content_greek|striptags|truncatewords:30 }}">
    {% else %}
        <meta property="og:title" content="{{ new.title_english }}">
        <meta property="og:description" content="{{ new.content_english|striptags|truncatewords:30 }}">
    {% endif %}

    {% if 'placeholder' in new.image.url %}
        <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{% static 'images/default_logo.jpg' %}">
    {% else %}
        <meta property="og:image" content="{{ new.image.url }}">
    {% endif %}
{% endblock %}

{% block content %}
<section class='mt-0 hero' id='hero-news-info'>
    <div class="container-fluid p-0">
        <div class='row position-relative hero-image-div'>
            {% if 'placeholder' in new.image.url %}
            <img class='img-fluid hero-image' src="{% static 'images/default_logo.jpg' %}" class="card-img-top" alt="{% trans 'Default image' %}">
            {% else %}
            <img class='img-fluid hero-image' src="{{ new.image.url }}" class="card-img-top" alt="{{ new.title }}">
            {% endif %}
            {% if LANGUAGE_CODE == 'el' %}
            <h1 class='fst-italic fw-bold hero-heading hide'>{{ new.title_greek }}</h1>
            {% else %}
            <h1 class='fst-italic fw-bold hero-heading hide'>{{ new.title_english }}</h1>
            {% endif %}
            <img class="down-arrow" src="{% static 'images/down_arrow.png' %}" alt="Down arrow">
        </div>
    </div>
</section>

<section id="main-content-news">
    <div class="row">
        <div class="col">
            {% if LANGUAGE_CODE == 'el' %}
            <div class="mx-5">{{ new.content_greek | safe }}</div>
            {% else %}
            <div class="mx-5">{{ new.content_english | safe }}</div>
            {% endif %}
            <p class="my-5 me-3 text-end">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="gray" class="bi bi-pencil-square" viewBox="0 0 16 16">
                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                </svg> {{ new.created_on|date:"F j, Y" }}
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col d-flex justify-content-around my-5 me-3">
            <a href="{% url 'news' %}">{% trans 'Back to news' %}</a>
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank">
                Share on <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
                    <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
                    </svg>
            </a>
        </div>
    </div>
</section>
{% endblock %}